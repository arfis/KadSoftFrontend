<ng2-slim-loading-bar [height]="'8px'"></ng2-slim-loading-bar>
<app-filter [type]="'Invoice'" [page]="currentPage" [pageSize]="pageSize" [sort]="sort"
            [sortOrientation]="sortOrientation" [filter]="filter"
            [filterType]="filterType" (onUpdate)="update($event)"></app-filter>
<table *ngIf="showList" class="table table-bordered table-responsive table-hover">
    <thead>Faktúry</thead>
    <tbody>
    <tr>
        <th style="width: 10px">#</th>
        <th>Číslo</th>
        <th>Zadal</th>
        <th>Klient</th>
        <th class="sortable" (click)="orderBy('totalPrice')">Suma</th>
        <th>položky</th>
        <th>Typ</th>
        <th>Status</th>
        <th>Odoslane</th>
    </tr>

    <tr *ngFor="let invoice of invoices" [routerLink]="[ '/invoice/', invoice.id ]">
        <td>{{invoice.id}}</td>
        <td>{{invoice.invoiceNumber}}</td>
        <td><a>{{invoice.company.name}}</a></td>

        <td><a *ngIf="invoice.customerId; else noLink" [routerLink]="[ '/user/', invoice?.customerId?.id ]">
            {{invoice.customer.mainContact.name}} {{invoice.customer.mainContact.surname}}</a>
            <ng-template #noLink>{{invoice.customer.mainContact.name}} {{invoice.customer.mainContact.surname}}</ng-template>
        </td>
        <td>{{invoice.totalPrice | currency:'eur':true}}</td>
        <td>{{invoice?.invoiceItems?.length}}</td>
        <td>{{invoiceTypes[invoice?.type-1]}}</td>
        <td><span class="label" [ngClass]="getStatusMessage(invoice?.status).label">
                {{getStatusMessage(invoice?.status).text}}
                </span>
        </td>
        <td>{{invoice?.sendByEmail === true ? 'áno' : 'nie'}}</td>
    </tr>
    </tbody>
</table>


<div class="row">
    <div class="col-md-6 col-md-offset-4">
        <pagination [totalItems]="totalSize" [(ngModel)]="currentPage" [maxSize]="pageSize"
                    class="pagination-sm"
                    [boundaryLinks]="true" [rotate]="false"
                    (numPages)="numPages = $event" (pageChanged)="pageChanged($event)"></pagination>
    </div>
</div>


